{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "UTAU Sequence Text",
	"patterns": [
		{ "include": "#version" },
		{ "include": "#numbers" },
		{ "include": "#strings" },
		{ "include": "#booleans" },
		{ "include": "#flags" },
		{ "include": "#pitchbend" },
		{ "include": "source.ini" }
	],
	"repository": {
		"version": {
			"patterns": [
				{
					"name": "string.unquoted.ust",
					"match": "UST Version\\d+\\.\\d+"
				}
			]
		},
		"numbers": {
			"patterns": [
				{
					"name": "constant.numeric.ust",
					"match": "[+-]?\\d+(\\.\\d+)?"
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"begin": "(Project|ProjectName|VoiceDir|CacheDir|OutFile|Tool1|Tool2|Lyric)(=)",
					"beginCaptures": {
        				"1": { "name": "keyword.control.ust" }
      				},
      				"end": "$",
      				"patterns": [
        				{
							"name": "string.unquoted.ust",
							"match": ".*"
						}
      				]
				}
			]
		},
		"booleans": {
			"patterns": [
				{
					"name": "keyword.control.ust",
					"match": "[Tt][Rr][Uu][Ee]|[Ff][Aa][Ll][Ss][Ee]"
				}
			]
		},
		"flags": {
  			"patterns": [
    			{
     				"begin": "(Flags)(=)",
      				"beginCaptures": {
        				"1": { "name": "keyword.control.ust" }
      				},
      				"end": "$",
      				"patterns": [
        				{
          					"name": "keyword.operator.flag.ust",
          					"match": "[A-Za-z]+"
        				},
        				{
          					"name": "constant.numeric.flag.ust",
          					"match": "[-+]?\\d+"
        				}
      				]
    			}
  			]
		},
		"pitchbend": {
			"patterns": [
				{
					"begin": "(PBStart|PBS|PBW|PBY|PBM)(=)",
					"beginCaptures": {
        				"1": { "name": "keyword.control.ust" }
      				},
      				"end": "$",
					"patterns": [
						{
          					"name": "punctuation.separator.ust",
          					"match": "[;,]"
        				},
						{
							"name": "constant.numeric.ust",
							"match": "[+-]?\\d+(\\.\\d+)?"
						},
						{
							"name": "string.unquoted.ust",
							"match": "[a-zA-Z]"
						}
					]
				}
			]
		}
	},
	"scopeName": "source.ust"
}